---
title: "スターターを触ってNeovimを試してみよう 【LazyVim】"
---

## Lazy.nvim / LazyVim

この世には LazyVim と Lazy.nvim というものがあります。
似ているのは名前だけではありません。
公式ドキュメントの見た目もそっくりです。

- [🚀 Getting Started | lazy.nvim](https://lazy.folke.io/)
- [🚀 Getting Started | LazyVim](https://www.lazyvim.org/)

大変そっくりですが二つは別ものです。

- Lazy.nvim : Neovim のプラグインマネージャー
- LazyVim : プラグインマネージャーであるLazy.nvimを使ってNeovimの設定を行ったもの

LazyVimの設定のソースコードはGitHubリポジトリから確認することができます。

@[card](https://github.com/LazyVim/LazyVim)

確認してみるとかなりの量の設定が書いてあることがわかります。
初めてNeovimを触る場合

- どんな設定が必要か
- キーバインドをどのように設定するか
- どのプラグインを使えばいいのか

など結構悩むポイントが多いです。

無限に時間がある場合は1から設定するのも良いですが、一旦Neovimがどんなものかを試してみたい！という場合はLazyVimから入るのがおすすめです。
触りながら、この設定は好きだな、この設定は自分向きではないな、などを確認しつつ自分好みにカスタマイズしていきましょう。

---

## DockerでLazyVimをサクッと試す

お試しで触ってみたい方はDockerで試すことができます。

```sh
docker run -w /root -it --rm alpine:edge sh -uelic '
  apk add git lazygit neovim ripgrep alpine-sdk --update
  git clone https://github.com/LazyVim/starter ~/.config/nvim
  cd ~/.config/nvim
  nvim
'
```

## LazyVimのインストール

公式ドキュメントに従ってLazyVimを導入していきます。

> [🛠️ Installation | LazyVim](https://www.lazyvim.org/installation)

まず既存のNeovimの設定ファイルをバックアップします。

```sh
mv ~/.config/nvim{,.bak}
mv ~/.local/share/nvim{,.bak}
mv ~/.local/state/nvim{,.bak}
mv ~/.cache/nvim{,.bak}
```

LazyVimをインストールします。

```sh
git clone https://github.com/LazyVim/starter ~/.config/nvim
```

不要な.gitディレクトリを削除します。

```sh
rm -rf ~/.config/nvim/.git
```

試しにNeovimを起動してみましょう。

```sh
nvim
```

終了したい場合は、`:q`、保存して終了したい場合は`:wq`を入力します。

## 日本語に赤い波線がひかれる

markdownファイルなどで日本語に赤い波線がひかれます。

![led line](/images/book/mozumasu-neovim/3.lazyvim/red_line_ja.png =700x)

以下のように設定すると、日本語全体にひかれた赤い線が表示されなくなります。

```lua:~/.config/nvim/lua/config/options.lua
-- vim標準スペルチェックから日本語を除外
vim.opt.spelllang:append("cjk")
```

保存して再度Neovimを立ち上げて確認すると、以下のように単語のみに赤い波線がひかれている状態になります。
この波線は Neovim のスペルチェックによるものです。

![red line word](/images/book/mozumasu-neovim/3.lazyvim/red_line_word.png =700x)

### スペルチェック

スペルチェックについては、`:h spell`でヘルプを確認するか、以下のリンクから日本語のドキュメントを確認することができます。

@[card](https://vim-jp.org/vimdoc-ja/spell.html)

単語にカーソルを合わせて`zg`で辞書に登録して波線を消すことができます。
スペルチェックで検知された単語にカーソルを移動したい場合は、`[s`や`]s`で移動することができます。
`:h [s`のように、キーバインドに関するヘルプを確認することもできます。

辞書に登録した単語は以下のファイルに追加されます。

- `~/.config/nvim/spell/en.utf-8.add`
- `~/.config/nvim/spell/en.utf-8.add.spl`

辞書に業務独自の単語を登録したい場合は、`~/.config/nvim/.gitignore`でgit管理から外しておきましょう。

```~/.config/nvim/.gitignore
en.utf-8.add.spl
en.utf-8.add
```

---

## LazyVimのカスタマイズ方法

## 設定方法

LazyVimの公式ドキュメントが充実しているので、参考にしつつ設定していきましょう。

### ファイル構成

LazyVimの設定ファイルの全体像は以下の通りです。

```sh
~/.config/nvim               # Neovimの設定ディレクトリ
├── lua
│   ├── config
│   │   ├── autocmds.lua     # 自動コマンド（autocmd）の設定ファイル
│   │   ├── keymaps.lua      # キーマッピング（ショートカットキー）の設定ファイル
│   │   ├── lazy.lua         # Lazy.nvim（プラグインマネージャー）の設定ファイル
│   │   └── options.lua      # 基本オプション設定ファイル
│   └── plugins              # プラグインの設定ファイルを保存するディレクトリ
│       ├── spec1.lua        # プラグインの設定を記述したLuaスクリプト（1つ目の設定例）
│       └── spec2.lua        # プラグインの設定を記述したLuaスクリプト（2つ目の設定例）
└── init.toml                # Neovimの初期化設定ファイル（Lazy.nvimや特殊設定で使う場合）
```

> [⚙️ Configuration | LazyVim](https://www.lazyvim.org/configuration)

一般的な設定は`~/.config/nvim/lua/config`ディレクトリに配置します。
このディレクトリ配下にある`autocmds.lua`, `keymaps.lua`, `lazy.lua`, `options.lua`の4つのファイルは自動で読み込まれるため、手動でrequireする必要はありません。

```sh diff
~/.config/nvim                 # Neovimの設定ディレクトリ
  ├── lua
  │   ├── config
+ │   │   ├── autocmds.lua     # 自動コマンド（autocmd）の設定ファイル
+ │   │   ├── keymaps.lua      # キーマッピング（ショートカットキー）の設定ファイル
+ │   │   ├── lazy.lua         # Lazy.nvim（プラグインマネージャー）の設定ファイル
+ │   │   └── options.lua      # 基本オプション設定ファイル
  │   └── plugins              # プラグインの設定ファイルを保存するディレクトリ
  │       ├── spec1.lua        # プラグインの設定を記述したLuaスクリプト（1つ目の設定例）
  │       └── spec2.lua        # プラグインの設定を記述したLuaスクリプト（2つ目の設定例）
  └── init.toml                # Neovimの初期化設定ファイル（Lazy.nvimや特殊設定で使う場合）
```

> [General Settings | LazyVim](https://www.lazyvim.org/configuration/general)

プラグインを追加したい場合は、`~/.config/nvim/lua/config/plugins`ディレクトリに配置します。
例としてspec1.lua, spec2.luaというファイルがありますが、実際にプラグインを追加する場合は`プラグイン名.lua`や`機能名.lua`などのファイル名にしておくとわかりやすいです。

```sh diff
~/.config/nvim                 # Neovimの設定ディレクトリ
  ├── lua
  │   ├── config
  │   │   ├── autocmds.lua     # 自動コマンド（autocmd）の設定ファイル
  │   │   ├── keymaps.lua      # キーマッピング（ショートカットキー）の設定ファイル
  │   │   ├── lazy.lua         # Lazy.nvim（プラグインマネージャー）の設定ファイル
  │   │   └── options.lua      # 基本オプション設定ファイル
  │   └── plugins              # プラグインの設定ファイルを保存するディレクトリ
+ │       ├── spec1.lua        # プラグインの設定を記述したLuaスクリプト（1つ目の設定例）
+ │       └── spec2.lua        # プラグインの設定を記述したLuaスクリプト（2つ目の設定例）
  └── init.toml                # Neovimの初期化設定ファイル（Lazy.nvimや特殊設定で使う場合）
```

## プラグインを追加する

### ヘルプの日本語化

---

## キーマップを設定してみよう

@[card](https://www.lazyvim.org/keymaps)
